# 摘要說明

這個範例，展示了 在 WPF 應用程式中，使用執行緒的同步處理內容 的應用方法與注意事項。

這個共有兩個功能展示區塊，左半部的開始、取消與右半部的開始與取消，左半部有使用[執行緒的同步處理內容]功能，右半部則沒有使用[執行緒的同步處理內容]功能

在這裡，我們會使用 CancellationTokenSource 類別建立一個物件，並且使用 CancellationTokenSource.Token 進行註冊 CancellationToken.Register 監聽關於取消請求，不過，在呼叫註冊方法的時候，除了會傳入 callback 委派方法外，還會傳入第二個參數，決定是否要使用 SynchronizationContext 同步內容。

我們綁定取消事件( cts.Token.Register )，若指定使用了 [執行緒的同步處理內容] 則當該綁定取消事件被呼叫的時候，就會使用UI執行緒來執行這個事件方法

當我們綁定取消事件( cts.Token.Register )，若指定不會使用了 [執行緒的同步處理內容] 則當該綁定取消事件被呼叫的時候，就不會使用UI執行緒來執行這個事件方法

在這種情況下，因為綁定取消事件不在UI執行緒上執行，就會造成App掛掉

## 練習說明

* 執行該範例專案
* 點選左上方的 [開始 有同步處理內容] 按鈕，確認畫面按鈕狀態有更新
  這裡使用 `cts.Token.Register(取消Callback1, true);` 註冊取消事件，並使用同步內容的執行緒來執行
* 點選左下方的 [取消 有同步處理內容] 按鈕，確認畫面按鈕狀態有更新  
* 點選右上方的 [開始 不同步處理內容] 按鈕，確認畫面按鈕狀態有更新
  這裡使用 `cts.Token.Register(取消Callback2, false);` 註冊取消事件，並不要使用同步內容的執行緒來執行
* 點選右下方的 [取消 不同步處理內容] 按鈕，確認畫面按鈕狀態有更新  